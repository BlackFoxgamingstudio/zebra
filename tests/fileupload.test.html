<!DOCTYPE html>
<html>
    <head>
        <script src='../zebra.min.js' type='text/javascript'></script>


        <script type='text/javascript'>
            var imagePan = null;

            zebra.ui.uploadHandler = function(files) {
                if (files != null && files[0] != null) {
                    var r = new FileReader();
                    r.onload = function(e) {
                        var img = new Image();
                        img.src = e.target.result;
                        img.onload = function() {
                            imagePan.setImage(img);
                        };
                    };
                    r.readAsDataURL(files[0]);
                }
            };

            zebra.ready(function() {
                eval(zebra.Import("ui", "layout"));

                imagePan = new ImagePan(null);

                var root = (new zebra.ui.zCanvas(400, 400)).root.properties({
                    layout:  new BorderLayout(4),
                    padding: 6,
                    border:  borders.plain,
                    kids  :  {
                        BOTTOM: new Button("Upload"),
                        CENTER: imagePan
                    }
                });

                root.find("//zebra.ui.Button").bind(function() {
                    var e = document.getElementById("zebra.files");
                    e.click();
                });
            });
        </script>


    </head>

    <body>
        <input type="file" id="zebra.files" multiple  style="display:none" onchange="zebra.ui.uploadHandler(this.files)"/>

    </body>
</html>